<!DOCTYPE html>
<html>
<head>
  <title>‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏†‡∏≤‡∏©‡∏µ‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f9f9f9; }
    h2 { text-align: center; color: #2f4f4f; }
    label { display:block; margin-top:15px; font-weight:bold; }
    input, button { width:100%; padding:10px; margin-top:5px; border-radius:6px; border:1px solid #ccc; box-sizing:border-box; }
    button { background:#06c755; color:#fff; border:none; font-size:16px; margin-top:20px; }
    #userIdBox { display:none; margin-top:10px; background:#fff3cd; padding:10px; border-left:5px solid #ffc107; }
  </style>
</head>
<body>
  <h2>üìã ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏†‡∏≤‡∏©‡∏µ‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå</h2>

  <label>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
  <input type="text" id="fullname" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ">

  <label>‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ</label>
  <input type="text" id="plate" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏Ç1234">

  <label>‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡∏†‡∏≤‡∏©‡∏µ</label>
  <input type="date" id="expiry">

  <button id="getUserIdBtn">üì• ‡∏î‡∏∂‡∏á LINE userId</button>
  <div id="userIdBox">User ID: <span id="userIdDisplay"></span></div>
  <input type="hidden" id="userId">

  <button id="submitBtn">‚úÖ ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>

  <script>
    let userId = "";
    async function initLIFF() {
      await liff.init({ liffId: "YOUR_LIFF_ID" });
      if (!liff.isLoggedIn()) liff.login();
    }
    document.getElementById("getUserIdBtn").addEventListener("click", async () => {
      try {
        const p = await liff.getProfile();
        userId = p.userId;
        document.getElementById("userId").value = userId;
        document.getElementById("userIdDisplay").textContent = userId;
        document.getElementById("userIdBox").style.display = "block";
      } catch (e) {
        alert("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á userId ‡πÑ‡∏î‡πâ");
      }
    });
    document.getElementById("submitBtn").addEventListener("click", async () => {
      const data = {
        fullname: document.getElementById("fullname").value.trim(),
        plate: document.getElementById("plate").value.trim(),
        expiry: document.getElementById("expiry").value,
        userId: document.getElementById("userId").value
      };
      if (!data.fullname || !data.plate || !data.expiry || !data.userId) {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ó‡∏∏‡∏Å‡∏ä‡πà‡∏≠‡∏á ‡πÅ‡∏•‡∏∞‡∏î‡∏∂‡∏á userId ‡∏Å‡πà‡∏≠‡∏ô");
        return;
      }
      const res = await fetch("YOUR_WEB_APP_URL", {
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body: JSON.stringify(data)
      });
      if (res.ok) {
        alert("‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!");
        liff.closeWindow();
      } else {
        alert("‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
      }
    });
    initLIFF();
  </script>
</body>
</html>
